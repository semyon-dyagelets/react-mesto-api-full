{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _toConsumableArray from\"/Users/SD/Desktop/dev/mesto-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/SD/Desktop/dev/mesto-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import Header from\"./Header.js\";import Main from\"./Main.js\";import Footer from\"./Footer.js\";import EditProfilePopup from\"./EditProfilePopup\";import EditAvatarPopup from\"./EditAvatarPopup\";import ImagePopup from\"./ImagePopup.js\";import AddPlacePopup from\"./AddPlacePopup\";import api from\"../utils/api.js\";import{CurrentUserContext}from\"../contexts/CurrentUserContext.js\";function App(){var _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),cards=_React$useState2[0],setCards=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),isEditProfilePopupOpen=_React$useState4[0],setIsEditProfilePopupOpen=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),isAddPlacePopupOpen=_React$useState6[0],setIsAddPlacePopupOpen=_React$useState6[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),isEditAvatarPopupOpen=_React$useState8[0],setIsEditAvatarPopupOpen=_React$useState8[1];var _React$useState9=React.useState(false),_React$useState10=_slicedToArray(_React$useState9,2),selectedCard=_React$useState10[0],setSelectedCard=_React$useState10[1];var _React$useState11=React.useState(\"\"),_React$useState12=_slicedToArray(_React$useState11,2),currentUser=_React$useState12[0],setCurrentUser=_React$useState12[1];React.useEffect(function(){api.getUserInfo().then(function(userInfo){setCurrentUser(userInfo);}).catch(function(err){console.log(err);});},[]);React.useEffect(function(){api.getInitialCards().then(function(cardsData){setCards(cardsData);}).catch(function(err){console.log(err);});},[]);function handleUpdateUser(data){api.editProfile(data).then(function(newUser){setCurrentUser(newUser);closeAllPopups();}).catch(function(err){console.log(err);});}function handleUpdateAvatar(link){api.editAvatar(link).then(function(newLink){setCurrentUser(newLink);closeAllPopups();}).catch(function(err){console.log(err);});}function handleEditAvatarClick(){setIsEditAvatarPopupOpen(true);}function handleEditProfileClick(){setIsEditProfilePopupOpen(true);}function handleAddPlaceClick(){setIsAddPlacePopupOpen(true);}function handleCardClick(card){setSelectedCard(card);}function handleCardLike(card){var isLiked=card.likes.some(function(i){return i._id===currentUser._id;});var likeRequest=!isLiked?api.putLike(card._id):api.deleteLike(card._id);likeRequest.then(function(newCard){var newCards=cards.map(function(c){return c._id===card._id?newCard:c;});setCards(newCards);});}function handleCardDelete(card){api.deleteCard(card._id).then(function(){var newCards=cards.filter(function(c){return c._id!==card._id;});setCards(newCards);}).catch(function(err){console.log(err);});}function handleAddPlaceSubmit(data){api.addCard(data).then(function(newCard){setCards([newCard].concat(_toConsumableArray(cards)));closeAllPopups();}).catch(function(err){console.log(err);});}function closeAllPopups(){setIsEditAvatarPopupOpen(false);setIsEditProfilePopupOpen(false);setIsAddPlacePopupOpen(false);setSelectedCard(false);}return/*#__PURE__*/_jsx(\"div\",{className:\"body\",children:/*#__PURE__*/_jsx(\"div\",{className:\"page\",children:/*#__PURE__*/_jsxs(CurrentUserContext.Provider,{value:currentUser,children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Main,{onEditAvatar:handleEditAvatarClick,onEditProfile:handleEditProfileClick,onAddPlace:handleAddPlaceClick,onCardClick:handleCardClick,onCardLike:handleCardLike,onCardDelete:handleCardDelete,cards:cards}),/*#__PURE__*/_jsx(Footer,{}),/*#__PURE__*/_jsx(EditProfilePopup,{isOpen:isEditProfilePopupOpen,onClose:closeAllPopups,onUpdateUser:handleUpdateUser}),/*#__PURE__*/_jsx(EditAvatarPopup,{isOpen:isEditAvatarPopupOpen,onClose:closeAllPopups,onUpdateAvatar:handleUpdateAvatar}),/*#__PURE__*/_jsx(AddPlacePopup,{isOpen:isAddPlacePopupOpen,onClose:closeAllPopups,onAddPlace:handleAddPlaceSubmit}),/*#__PURE__*/_jsx(ImagePopup,{card:selectedCard,onClose:closeAllPopups})]})})});}export default App;","map":{"version":3,"sources":["/Users/SD/Desktop/dev/mesto-react/src/components/App.js"],"names":["React","Header","Main","Footer","EditProfilePopup","EditAvatarPopup","ImagePopup","AddPlacePopup","api","CurrentUserContext","App","useState","cards","setCards","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","selectedCard","setSelectedCard","currentUser","setCurrentUser","useEffect","getUserInfo","then","userInfo","catch","err","console","log","getInitialCards","cardsData","handleUpdateUser","data","editProfile","newUser","closeAllPopups","handleUpdateAvatar","link","editAvatar","newLink","handleEditAvatarClick","handleEditProfileClick","handleAddPlaceClick","handleCardClick","card","handleCardLike","isLiked","likes","some","i","_id","likeRequest","putLike","deleteLike","newCard","newCards","map","c","handleCardDelete","deleteCard","filter","handleAddPlaceSubmit","addCard"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Header from \"./Header.js\";\nimport Main from \"./Main.js\";\nimport Footer from \"./Footer.js\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport ImagePopup from \"./ImagePopup.js\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport api from \"../utils/api.js\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext.js\";\n\nfunction App() {\n  const [cards, setCards] = React.useState([]);\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState(false);\n  const [currentUser, setCurrentUser] = React.useState(\"\");\n\n  React.useEffect(() => {\n    api\n      .getUserInfo()\n      .then((userInfo) => {\n        setCurrentUser(userInfo);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }, []);\n\n  React.useEffect(() => {\n    api\n      .getInitialCards()\n      .then((cardsData) => {\n        setCards(cardsData);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }, []);\n\n  function handleUpdateUser(data) {\n    api\n      .editProfile(data)\n      .then((newUser) => {\n        setCurrentUser(newUser);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  function handleUpdateAvatar(link) {\n    api\n      .editAvatar(link)\n      .then((newLink) => {\n        setCurrentUser(newLink);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  function handleCardClick(card) {\n    setSelectedCard(card);\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some((i) => i._id === currentUser._id);\n    const likeRequest = !isLiked\n      ? api\n      .putLike(card._id)\n      : api\n      .deleteLike(card._id);\n    likeRequest.then((newCard) => {\n      const newCards = cards.map((c) => (c._id === card._id ? newCard : c));\n      setCards(newCards);\n    });\n  }\n\n  function handleCardDelete(card) {\n    api\n      .deleteCard(card._id)\n      .then(() => {\n        const newCards = cards.filter((c) => c._id !== card._id);\n        setCards(newCards);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  function handleAddPlaceSubmit(data) {\n    api\n      .addCard(data)\n      .then((newCard) => {\n        setCards([newCard, ...cards]);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  function closeAllPopups() {\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setSelectedCard(false);\n  }\n\n  return (\n    <div className=\"body\">\n      <div className=\"page\">\n        <CurrentUserContext.Provider value={currentUser}>\n          <Header />\n\n          <Main\n            onEditAvatar={handleEditAvatarClick}\n            onEditProfile={handleEditProfileClick}\n            onAddPlace={handleAddPlaceClick}\n            onCardClick={handleCardClick}\n            onCardLike={handleCardLike}\n            onCardDelete={handleCardDelete}\n            cards={cards}\n          />\n\n          <Footer />\n\n          <EditProfilePopup\n            isOpen={isEditProfilePopupOpen}\n            onClose={closeAllPopups}\n            onUpdateUser={handleUpdateUser}\n          />\n\n          <EditAvatarPopup\n            isOpen={isEditAvatarPopupOpen}\n            onClose={closeAllPopups}\n            onUpdateAvatar={handleUpdateAvatar}\n          />\n\n          <AddPlacePopup\n            isOpen={isAddPlacePopupOpen}\n            onClose={closeAllPopups}\n            onAddPlace={handleAddPlaceSubmit}\n          />\n\n          <ImagePopup \n          card={selectedCard} \n          onClose={closeAllPopups} />\n\n        </CurrentUserContext.Provider>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}