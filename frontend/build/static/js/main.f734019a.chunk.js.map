{"version":3,"sources":["images/logo-white.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/ImagePopup.js","components/AddPlacePopup.js","components/Login.js","components/Register.js","components/ProtectedRoute.js","images/register-sucess.svg","images/register-error.svg","components/InfoTooltip.js","utils/api.js","utils/auth.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","loggedIn","email","onSignOut","className","src","headerLogo","alt","path","to","onClick","CurrentUserContext","React","createContext","Card","props","currentUser","useContext","isOwn","card","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","link","name","onCardClick","type","aria-label","onCardDelete","onCardLike","length","Main","avatar","onEditAvatar","about","onEditProfile","onAddPlace","cards","map","Footer","PopupWithForm","useEffect","isOpen","handleEscapeClose","event","key","onClose","document","addEventListener","removeEventListener","method","onSubmit","noValidate","title","children","buttonText","EditProfilePopup","useState","setName","description","setDescription","evt","preventDefault","onUpdateUser","id","value","onChange","target","minLength","maxLength","required","EditAvatarPopup","avatarRef","useRef","onUpdateAvatar","current","ref","placeholder","ImagePopup","AddPlacePopup","nameRef","linkRef","Login","onLogin","initialData","password","data","setData","handleChange","Register","onRegister","ProtectedRoute","Component","component","InfoTooltip","isSuccessed","authsucess","authfail","api","baseURL","this","_baseURL","res","ok","json","Promise","reject","status","fetch","headers","authorization","localStorage","getItem","then","_checkResponse","body","JSON","stringify","BASE_URL","responseCheck","response","App","setCards","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isInfoTooltipOpen","setIsInfoTooltipOpen","selectedCard","setSelectedCard","setCurrentUser","setLoggedIn","setEmail","isRegistrationSuccessed","setIsRegistrationSuccessed","history","useHistory","closeAllPopups","tokenCheck","useCallback","token","getUserInfo","push","catch","userInfo","err","console","log","getInitialCards","cardsData","handleSignOut","removeItem","Provider","auth","setItem","deleteLike","putLike","newCard","newCards","c","deleteCard","filter","editProfile","newUser","editAvatar","newLink","addCard","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.f734019a.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo-white.ff5e7d02.svg\";","import headerLogo from \"../images/logo-white.svg\";\nimport { Route, Link, Switch } from \"react-router-dom\";\n\nfunction Header({ loggedIn, email, onSignOut }) {\n  return (\n    <header className=\"header\">\n      <img className=\"header__logo\" src={headerLogo} alt=\"Место-логотип\" />\n\n      <ul className=\"header__items\">\n        <Switch>\n\n          <Route path=\"/sign-up\">\n            <li className=\"header__item header__item-link\">\n              <Link className=\"header__link\" to=\"/sign-in\">Войти</Link>\n            </li>\n          </Route>\n\n          <Route path=\"/sign-in\">\n            <li className=\"header__item header__item-link\">\n              <Link className=\"header__link\" to=\"/sign-up\">Регистрация</Link>\n            </li>\n          </Route>\n\n          {loggedIn ? (\n            <>\n              <li className=\"header__item\">{email}</li>\n              <li className=\"header__item header__item-link\" onClick={onSignOut}>\n                Выйти\n              </li>\n            </>\n          ) : (\n            \"\"\n          )}\n        </Switch>\n      </ul>\n    </header>\n  );\n}\n\nexport default Header;\n","import React from 'react';\nexport const CurrentUserContext = React.createContext();","import React from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\n\n\nfunction Card(props) {\n\n    const currentUser = React.useContext(CurrentUserContext);\n\n    const isOwn = props.card.owner === currentUser._id;\n    const cardDeleteButtonClassName = (`${isOwn ? 'element__delete' : 'element__delete_hidden'}`); \n\n    const isLiked = props.card.likes.some(i => i === currentUser._id);\n    const cardLikeButtonClassName = (`${isLiked ? 'element__like_active' : 'element__like'}`);\n\n    function handleCardClick() {\n        props.onCardClick({\n            name: props.card.name,\n            link: props.card.link,\n        })\n    }\n\n    function handleLikeClick() {\n        props.onCardLike(props.card)\n    }\n\n    function handleDeleteClick() {\n        props.onCardDelete(props.card)\n    } \n\n    return (\n        <article className=\"element\">\n            <img className=\"element__photo\" \n            src={props.card.link} \n            alt={props.card.name} \n            onClick={handleCardClick} />\n            <button className={cardDeleteButtonClassName}\n                type=\"button\"\n                aria-label=\"удалить\"\n                onClick={handleDeleteClick}>\n            </button>\n            <div className=\"element__container\">\n                <h2 className=\"element__place-name\">{props.card.name}</h2>\n                <div className=\"element__like-container\">\n                    <button className={cardLikeButtonClassName}\n                        type=\"button\"\n                        aria-label=\"лайк\"\n                        onClick={handleLikeClick}>\n                    </button>\n                    <p className=\"element__like-counter\">{props.card.likes.length}</p>\n                </div>\n            </div>\n        </article>\n    )\n}\n\nexport default Card;","import React from 'react';\nimport Card from './Card.js';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\n\nfunction Main(props) {\n  const currentUser = React.useContext(CurrentUserContext);\n\n  return (\n    <div className=\"page\">\n      <main>\n        <section className=\"profile\">\n          <div className=\"profile__container\">\n            <div className=\"profile__avatar-container\">\n              <img\n                className=\"profile__avatar\"\n                src={currentUser.avatar}\n                alt=\"аватар\"\n              />\n              <button\n                className=\"profile__edit-button profile__edit-avatar-button\"\n                type=\"button\"\n                aria-label=\"редактировать-аватар\"\n                onClick={props.onEditAvatar}\n              />\n            </div>\n            <div className=\"profile__info\">\n              <div className=\"profile__description\">\n                <h1 className=\"profile__name\">{currentUser.name}</h1>\n                <p className=\"profile__profession\">{currentUser.about}</p>\n              </div>\n              <button\n                className=\"profile__edit-button profile__edit-description-button\"\n                type=\"button\"\n                aria-label=\"редактировать-профиль\"\n                onClick={props.onEditProfile}\n              />\n            </div>\n          </div>\n          <button\n            className=\"profile__add-button\"\n            type=\"button\"\n            aria-label=\"добавить-фото\"\n            onClick={props.onAddPlace}\n          />\n        </section>\n\n        <section className=\"elements\" aria-label=\"Фотографии\">\n          {props.cards.map((card) => (\n            <Card\n              key={card._id}\n              card={card}\n              onCardClick={props.onCardClick}\n              onCardLike={props.onCardLike}\n              onCardDelete={props.onCardDelete}\n            />\n          ))}\n        </section>\n      </main>\n    </div>\n  );\n}\n\nexport default Main;\n","import React from 'react';\n\nfunction Footer() {\n    return (\n        <footer className=\"footer\">\n            <p className=\"footer__copyright\"> &copy; 2021 Mesto Russia</p>\n        </footer>\n    )\n}\n\nexport default Footer;","import React from \"react\";\n\nfunction PopupWithForm(props) {\n  React.useEffect(() => {\n    if (!props.isOpen) return;\n    const handleEscapeClose = (event) => {\n      if (event.key === \"Escape\") {\n        props.onClose();\n      }\n    };\n    document.addEventListener(\"keydown\", handleEscapeClose);\n    return () => {\n      document.removeEventListener(\"keydown\", handleEscapeClose);\n    };\n  });\n\n  return (\n    <div\n      className={`popup ${props.isOpen ? \"popup_opened\" : \"\"} popup_type-${props.name}`}\n    >\n      <form\n        className=\"popup__container popup__container_edit-form\"\n        name={`${props.name}`}\n        method=\"POST\"\n        onSubmit={props.onSubmit}\n        noValidate\n      >\n        <h3 className=\"popup__edit-profile\">{`${props.title}`}</h3>\n        {props.children}\n        <button \n        className=\"popup__button-save\" \n        type=\"submit\">\n          {`${props.buttonText}`}\n        </button>\n        <button\n          className=\"popup__button-close\"\n          type=\"button\"\n          onClick={props.onClose}\n        ></button>\n      </form>\n    </div>\n  );\n}\n\nexport default PopupWithForm;\n","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext.js\";\n\nfunction EditProfilePopup(props) {\n\n  const currentUser = React.useContext(CurrentUserContext);\n\n  const [name, setName] = React.useState(\"\");\n  const [description, setDescription] = React.useState(\"\");\n\n  React.useEffect(() => {\n    setName(currentUser.name);\n    setDescription(currentUser.about);\n  }, [currentUser]);\n\n  function handleNameChange(evt) {\n    setName(evt.target.value);\n  }\n\n  function handleDesсriptionChange(evt) {\n    setDescription(evt.target.value);\n  }\n\n  function handleSubmit(evt) {\n    evt.preventDefault();\n    props.onUpdateUser({\n      name: name,\n      about: description,\n    });\n  }\n\n  return (\n    <PopupWithForm\n      title=\"Редактировать профиль\"\n      name=\"edit\"\n      isOpen={props.isOpen}\n      onSubmit={handleSubmit}\n      onClose={props.onClose}\n      buttonText=\"Сохранить\"\n    >\n      <input\n        className=\"popup__input popup__input_edit_name\"\n        id=\"name-input\"\n        name=\"name\"\n        type=\"text\"\n        value={name || \"\"}\n        onChange={handleNameChange}\n        minLength=\"2\"\n        maxLength=\"40\"\n        required\n      />\n      <span \n      className=\"popup__input-error\" \n      id=\"name-input-error\">\n      </span>\n      <input\n        className=\"popup__input popup__input_edit_description\"\n        id=\"description-input\"\n        name=\"about\"\n        type=\"text\"\n        value={description || \"\"}\n        onChange={handleDesсriptionChange}\n        minLength=\"2\"\n        maxLength=\"200\"\n        required\n      />\n      <span \n      className=\"popup__input-error\" \n      id=\"description-input-error\">\n      </span>\n    </PopupWithForm>\n  );\n}\n\nexport default EditProfilePopup;\n","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\n\nfunction EditAvatarPopup(props) {\n\n    const avatarRef = React.useRef();\n\n    function handleSubmit(evt) {\n        evt.preventDefault();\n        props.onUpdateAvatar({\n          avatar: avatarRef.current.value\n        });\n        avatarRef.current.value = ''\n      }\n\n  return (\n    <PopupWithForm\n      title=\"Обновить аватар\"\n      name=\"edit-avatar\"\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      onSubmit={handleSubmit}\n      buttonText=\"Сохранить\"\n    >\n      <input\n        className=\"popup__input popup__input_edit_name\"\n        id=\"avatar-link-input\"\n        name=\"avatar\"\n        type=\"url\"\n        ref={avatarRef}\n        placeholder=\"Ссылка на картинку\"\n        required\n      />\n      <span className=\"popup__input-error\" id=\"avatar-link-input-error\"></span>\n    </PopupWithForm>\n  );\n}\n\nexport default EditAvatarPopup;\n","function ImagePopup(props) {\n    return (\n        <div className={`popup popup_type-image-caption ${props.card ? 'popup_opened' : ''}`}>\n            <div className=\"popup__image-container\">\n                <img \n                className=\"popup__caption-image\" \n                src={props.card ? props.card.link : ''} \n                alt={props.card ? props.card.name : ''} />\n                <h2 className=\"popup__caption-image-title\">{props.card ? props.card.name : ''}</h2>\n                <button \n                className=\"popup__button-close\" \n                type=\"button\" \n                onClick={props.onClose}>\n                </button>\n            </div>\n        </div>\n    )\n}\n\nexport default ImagePopup;","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\n\nfunction AddPlacePopup(props) {\n  const nameRef = React.useRef();\n  const linkRef = React.useRef();\n\n  function handleSubmit(evt) {\n    evt.preventDefault();\n    props.onAddPlace({\n      name: nameRef.current.value,\n      link: linkRef.current.value,\n    });\n    nameRef.current.value = ''\n    linkRef.current.value = ''\n  }\n\n  return (\n    <PopupWithForm\n      title=\"Новое место\"\n      name=\"add-card\"\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      onSubmit={handleSubmit}\n      buttonText=\"Добавить\"\n    >\n      <input\n        className=\"popup__input popup__input_edit_name\"\n        id=\"place-name-input\"\n        name=\"name\"\n        ref={nameRef}\n        type=\"text\"\n        minLength=\"2\"\n        maxLength=\"30\"\n        placeholder=\"Название\"\n        required\n      />\n      <span className=\"popup__input-error\" id=\"place-name-input-error\"></span>\n      <input\n        className=\"popup__input popup__input_edit_description\"\n        id=\"place-link-input\"\n        name=\"link\"\n        ref={linkRef}\n        type=\"url\"\n        placeholder=\"Ссылка на картинку\"\n        required\n      />\n      <span className=\"popup__input-error\" id=\"place-link-input-error\"></span>\n    </PopupWithForm>\n  );\n}\n\nexport default AddPlacePopup;\n","import React from \"react\";\n\nfunction Login({ onLogin }) {\n  const initialData = {\n    email: \"\",\n    password: \"\",\n  };\n  const [data, setData] = React.useState(initialData);\n\n  const handleChange = (evt) => {\n    const { name, value } = evt.target;\n    setData((data) => ({\n      ...data,\n      [name]: value,\n    }));\n  };\n\n  const resetForm = () => {\n    setData(initialData);\n  };\n\n  const handleSubmit = (evt) => {\n    evt.preventDefault();\n    if (!data.email || !data.password) {\n      return;\n    }\n    onLogin(data);\n    resetForm();\n  };\n\n  return (\n    <div className=\"authorization\">\n      <h2 className=\"authorization__title\">Вход</h2>\n      <form\n        className=\"authorization__form authorization__form_login \"\n        name=\"login\"\n        method=\"POST\"\n        onSubmit={handleSubmit}\n        noValidate\n      >\n        <input\n          id=\"email\"\n          name=\"email\"\n          className=\"authorization__input authorization__input_email\"\n          type=\"email\"\n          value={data.email}\n          onChange={handleChange}\n          placeholder=\"Email\"\n          required\n        />\n        <input\n          id=\"password\"\n          name=\"password\"\n          className=\"authorization__input authorization__input_password\"\n          type=\"password\"\n          value={data.password}\n          onChange={handleChange}\n          placeholder=\"Пароль\"\n          required\n        />\n        <button className=\"authorization__button-save\" type=\"submit\">\n          Войти\n        </button>\n      </form>\n    </div>\n  );\n}\n\nexport default Login;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\n\nfunction Register({onRegister}) {\n    const initialData = {\n      email: \"\",\n      password: \"\",\n    };\n  \nconst [data, setData] = React.useState(initialData);\nconst resetForm = () => {\n    setData(initialData);\n  };\n\nconst handleChange = (evt) => {\n    const { name, value } = evt.target;\n        setData(data => ({\n            ...data,\n            [name]: value,\n        }))\n}\n\n\nconst handleSubmit = (evt) => {\n    evt.preventDefault();\n    if (!data.email || !data.password) {\n        return\n    }\n    onRegister(data);\n    resetForm();\n}\n\n\nreturn (\n    <div className=\"authorization\">\n    <form\n    className=\"authorization__form authorization__form_register \"\n    name=\"register\"\n    onSubmit={handleSubmit}\n    noValidate\n  >\n    <h2 className=\"authorization__title\">Регистрация</h2>\n    <input \n    id=\"email\"\n    name=\"email\"\n    className=\"authorization__input authorization__input_email\"\n    type=\"email\"\n    value={data.email}\n    onChange={handleChange} \n    placeholder=\"Email\"\n    required/>\n    <input \n    id=\"password\"\n    name=\"password\"\n    className=\"authorization__input authorization__input_password\"\n    type=\"password\"\n    value={data.password}\n    onChange={handleChange}\n    placeholder=\"Пароль\"\n    required\n    />\n    <button \n    className=\"authorization__button-save\" \n    type=\"submit\">\n        Зарегистрироваться\n    </button>\n  </form>\n\n<div className=\"authorization__signin\">\n<p className=\"authorization__signin-text\">Уже зарегистрированы? \n<Link to=\"/sign-in\" className=\"authorization__link\"> Войти</Link> </p>\n</div>\n\n</div>\n)\n}\n\nexport default Register;","import React from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\n\nfunction ProtectedRoute({component: Component, ...props}) {\n    return (\n        <Route> \n            {() => props.loggedIn ? <Component {...props} /> : <Redirect to=\"./sign-in\" />}\n        </Route>\n    )\n}\n\nexport default ProtectedRoute;","export default __webpack_public_path__ + \"static/media/register-sucess.1b6082f8.svg\";","export default __webpack_public_path__ + \"static/media/register-error.df8eddf6.svg\";","import React from \"react\";\nimport authsucess from \"../images/register-sucess.svg\";\nimport authfail from \"../images/register-error.svg\";\n\nfunction InfoTooltip(props) {\n  return (\n    <div\n      className={`popup ${\n        props.isOpen ? \"popup_opened\" : \"\"\n      } popup_type-info-tooltip`}\n    >\n      <div className=\"popup__info-tooltip-container\">\n          <img\n            className=\"info-tooltip__image\"\n            src={props.isSuccessed ? authsucess : authfail}\n            alt=\"статус регистрации\"\n          />\n          <p className=\"info-tooltip__text\">\n              {props.isSuccessed ? \"Вы успешно зарегистрировались!\" : \"Что-то пошло не так. Попробуйте ещё раз.\"}\n            </p>\n          <button\n          className=\"popup__button-close popup__button-close_white\"\n          type=\"button\"\n          onClick={props.onClose}\n        ></button>\n      </div>\n    </div>\n  );\n}\n\nexport default InfoTooltip;\n","class API {\n    constructor({ baseURL }) {\n        this._baseURL = baseURL;\n    }\n\n    _checkResponse(res) {\n        if (res.ok) {\n            return res.json();\n        }\n        return Promise.reject(`Ошибка ${res.status}`);\n    }\n\n    getUserInfo() {\n        return fetch(`${this._baseURL}/users/me`, {\n            method: 'GET',\n            headers: {\n                authorization: `Bearer ${localStorage.getItem('token')}`,\n                'Content-Type': 'application/json'\n            }\n        })\n            .then(this._checkResponse)\n    }\n\n    getInitialCards() {\n        return fetch(`${this._baseURL}/cards`, {\n            method: 'GET',\n            headers: {\n                authorization: `Bearer ${localStorage.getItem('token')}`,\n                'Content-Type': 'application/json'\n            }\n        })\n            .then(this._checkResponse)\n    }\n\n    editProfile(data) {\n        return fetch(`${this._baseURL}/users/me`, {\n            method: 'PATCH',\n            headers: {\n                authorization: `Bearer ${localStorage.getItem('token')}`,\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                name: data.name,\n                about: data.about\n            })\n        })\n            .then(this._checkResponse)\n    }\n\n    editAvatar(data) {\n        return fetch(`${this._baseURL}/users/me/avatar`, {\n            method: 'PATCH',\n            headers: {\n                authorization: `Bearer ${localStorage.getItem('token')}`,\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                avatar: data.avatar,\n            })\n        })\n            .then(this._checkResponse)\n    }\n\n    addCard(data) {\n        return fetch(`${this._baseURL}/cards`, {\n            method: 'POST',\n            headers: {\n                authorization: `Bearer ${localStorage.getItem('token')}`,\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n                name: data.name,\n                link: data.link\n            })\n        })\n            .then(this._checkResponse)\n    }\n\n    deleteCard(_id) {\n        return fetch(`${this._baseURL}/${_id}`, {\n            method: 'DELETE',\n            headers: {\n                authorization: `Bearer ${localStorage.getItem('token')}`,\n            }\n        })\n            .then(this._checkResponse)\n    }\n\n    putLike(_id) {\n        return fetch(`${this._baseURL}/cards/${_id}/likes/`, {\n            method: 'PUT',\n            headers: {\n                authorization: `Bearer ${localStorage.getItem('token')}`,\n            }\n        })\n            .then(this._checkResponse)\n    }\n\n    deleteLike(_id) {\n        return fetch(`${this._baseURL}/cards/${_id}/likes`, {\n            method: 'DELETE',\n            headers: {\n                authorization: `Bearer ${localStorage.getItem('token')}`,\n            }\n        })\n            .then(this._checkResponse)\n    }\n}\n\nconst api = new API({\n    baseURL: 'http://api.semyon-dyagelets.nomoredomains.club',\n});\n\nexport default api;","export const BASE_URL='http://api.semyon-dyagelets.nomoredomains.club';\n\nconst responseCheck = (response) => response.ok ? response.json() : Promise.reject(`Ошибка ${response.status}`);\n\nexport const register = (email, password) => {\n    return fetch(`${BASE_URL}/signup`, {\n        method: \"POST\",\n        headers: {\n            \"Accept\": \"application/json\",\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({email, password})\n    })\n    .then(responseCheck)\n}\n\nexport const authorize = (email, password) => {\n    return fetch(`${BASE_URL}/signin`, {\n        method: \"POST\",\n        headers: {\n            \"Accept\": \"application/json\",\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({email, password})\n    })\n    .then(responseCheck)\n}","import React from \"react\";\nimport Header from \"./Header.js\";\nimport Main from \"./Main.js\";\nimport Footer from \"./Footer.js\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport ImagePopup from \"./ImagePopup.js\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport Login from \"./Login\";\nimport Register from \"./Register\";\nimport ProtectedRoute from \"./ProtectedRoute\";\nimport InfoTooltip from \"./InfoTooltip\";\nimport api from \"../utils/api.js\";\nimport * as auth from \"../utils/auth.js\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext.js\";\nimport { Redirect, Route, Switch, useHistory } from \"react-router-dom\";\n\nfunction App() {\n\n  const initialData = {\n    email: \"\",\n    password: \"\"\n  }\n  const [cards, setCards] = React.useState([]);\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [isInfoTooltipOpen, setIsInfoTooltipOpen] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState(false);\n  const [currentUser, setCurrentUser] = React.useState(\"\");\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [email, setEmail] = React.useState(initialData);\n  const [isRegistrationSuccessed, setIsRegistrationSuccessed] = React.useState(false);\n  const history = useHistory();\n\n\n  function handleUpdateUser(data) {\n    api\n      .editProfile(data)\n      .then((newUser) => {\n        setCurrentUser(newUser);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  function handleUpdateAvatar(link) {\n    api\n      .editAvatar(link)\n      .then((newLink) => {\n        setCurrentUser(newLink);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  function handleCardClick(card) {\n    setSelectedCard(card);\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some((i) => i === currentUser._id);\n    const likeRequest = !isLiked\n      ? api.putLike(card._id)\n      : api.deleteLike(card._id);\n    likeRequest.then((newCard) => {\n      const newCards = cards.map((c) => (c._id === card._id ? newCard : c));\n      setCards(newCards);\n    });\n  }\n\n  function handleCardDelete(card) {\n    api\n      .deleteCard(card._id)\n      .then(() => {\n        const newCards = cards.filter((c) => c._id !== card._id);\n        setCards(newCards);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  function handleAddPlaceSubmit(data) {\n    api\n      .addCard(data)\n      .then((newCard) => {\n        setCards([newCard, ...cards]);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  function closeAllPopups() {\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setSelectedCard(false);\n    setIsInfoTooltipOpen(false);\n  }\n\n  const handleLogin = ({email, password}) => {\n    return auth.authorize(email, password)\n    .then(res => {\n      if (res.token) {\n        localStorage.setItem('token', res.token);\n        setLoggedIn(true);\n        setEmail(email);\n        history.push(\"/\");\n      }\n    })\n    .catch((err) => {\n      console.log(err);\n    });\n  }\n\n\n  const tokenCheck = React.useCallback(() => {\n    const token = localStorage.getItem(\"token\");\n    if (token) {\n      api.getUserInfo(token)\n      .then((res) => {\n        if(res) {\n          setLoggedIn(true);\n          setEmail(res.email);\n        }\n        history.push(\"/\")\n      })\n      .catch(() => history.push(\"/sign-in\"))\n    }\n  }, [history])\n\n  React.useEffect(() => {\n    tokenCheck();\n  }, [tokenCheck])\n\n  React.useEffect(() => {\n    if(loggedIn) {\n    api\n      .getUserInfo()\n      .then((userInfo) => {\n        setCurrentUser(userInfo);\n      })\n      .catch((err) => {\n        console.log(err);\n      }); \n\n      api\n      .getInitialCards()\n      .then((cardsData) => {\n        setCards(cardsData);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n    }\n  }, [loggedIn]);\n\n  const handleRegister = ({email, password}) => {\n    return auth.register(email, password)\n    .then(res => {\n      setIsRegistrationSuccessed(true);\n      setIsInfoTooltipOpen(true);\n      history.push(\"/sign-in\");\n      return res;\n    })\n    .catch((err) => {\n      setIsInfoTooltipOpen(true)\n      console.log(err);\n    })\n  }\n\n  const handleSignOut = () => {\n    localStorage.removeItem(\"jwt\");\n    setEmail(initialData);\n    setLoggedIn(false);\n    history.push(\"/login\");\n  }\n\n  return (\n    <div className=\"body\">\n      <div className=\"page\">\n        <CurrentUserContext.Provider value={currentUser}>\n          <Header loggedIn={loggedIn} onSignOut={handleSignOut} email={email} />\n\n          <Switch>\n            <Route path=\"/sign-in\">\n              <Login onLogin={handleLogin} tokenCheck={tokenCheck} />\n            </Route>\n\n            <Route path=\"/sign-up\">\n              <Register onRegister={handleRegister} />\n            </Route>\n\n            <ProtectedRoute\n              path=\"/\"\n              loggedIn={loggedIn}\n              component={Main}\n              onSignOut={handleSignOut}\n              onEditAvatar={handleEditAvatarClick}\n              onEditProfile={handleEditProfileClick}\n              onAddPlace={handleAddPlaceClick}\n              onCardClick={handleCardClick}\n              onCardLike={handleCardLike}\n              onCardDelete={handleCardDelete}\n              cards={cards}\n            />\n\n            <Route>\n              {loggedIn ? <Redirect to=\"/\" /> : <Redirect to=\"/sign-in\" />}\n            </Route>\n          </Switch>\n\n          <Footer />\n\n          <EditProfilePopup\n            isOpen={isEditProfilePopupOpen}\n            onClose={closeAllPopups}\n            onUpdateUser={handleUpdateUser}\n          />\n\n          <EditAvatarPopup\n            isOpen={isEditAvatarPopupOpen}\n            onClose={closeAllPopups}\n            onUpdateAvatar={handleUpdateAvatar}\n          />\n\n          <AddPlacePopup\n            isOpen={isAddPlacePopupOpen}\n            onClose={closeAllPopups}\n            onAddPlace={handleAddPlaceSubmit}\n          />\n\n          <ImagePopup card={selectedCard} onClose={closeAllPopups} />\n\n          <InfoTooltip\n            isOpen={isInfoTooltipOpen}\n            isSuccessed={isRegistrationSuccessed}\n            onClose={closeAllPopups}\n          />\n        </CurrentUserContext.Provider>\n      </div>\n    </div>\n  );\n}\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './components/App.js';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n    <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\nreportWebVitals();\n"],"sourceRoot":""}